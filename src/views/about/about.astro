---
import style from "./about.module.scss";
import * as data from "src/utils/data";
import ContributorCard from "./contributor-card.astro";
import { getTranslatedPage, translate } from "src/utils/translations";
import TranslationsHeader from "src/views/base/translations/translations-header.astro";
import License from "./license.astro";
import { siteMetadata } from "constants/site-config";
import BannerSvg from "./banner-svg.astro";

const about = getTranslatedPage(
	Astro,
	await Astro.glob("../../../content/site/about-us*.mdx"),
);
---

<div class="container">
	<div class={style.banner}>
		<BannerSvg />
	</div>
	<main class={`${style.aboutBody} post-body`}>
		<TranslationsHeader locales={about.locales} />

		<about.page.Content />

		<hr />

		<h2 id="contributors">
			{translate(Astro, "title.contributors")}
		</h2>
		<div class={style.unicorns}>
			{
				data.unicorns.map((unicornInfo) => (
					<ContributorCard unicorn={unicornInfo} />
				))
			}
		</div>

		<hr />

		<h2 id="licenses">{translate(Astro, "title.licenses")}</h2>

		<div class={style.licenses}>
			{
				Object.values(data.tags).map((tag) =>
					"image" in tag ? (
						<License
							name={tag.displayName}
							image={tag.image}
							url={
								`https://github.com/${siteMetadata.repoPath}/blob/main/public` +
								tag.image.replace(".svg", "-LICENSE.txt")
							}
						/>
					) : (
						[]
					),
				)
			}
		</div>

		<hr />
	</main>
</div>
