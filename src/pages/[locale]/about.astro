---
import Document from "src/layouts/document.astro";
import SEO from "components/seo/seo.astro";
import About from "src/views/about/about.astro";
import { getTranslatedPage, translate } from "utils/translations";
import { Languages } from "types/index";

const { locales } = getTranslatedPage(
	Astro,
	await Astro.glob("../../../content/site/about-us*.md")
);

export async function getStaticPaths() {
	const globResults = await Astro.glob("../../../content/site/about-us*.md");
	return (
		globResults
			// Filter out English
			.filter((globItem) => !globItem.file.endsWith("about-us.md"))
			.map((globItem) => {
				// .es.md
				const fileEnding = globItem.file.split("about-us").at(-1);
				const locale: Languages = fileEnding.split(".")[1] as never;
				return {
					params: {
						locale,
					},
					props: {
						globResults,
						locale,
					},
				};
			})
	);
}
---

<Document>
	<SEO
		title={translate(Astro, "title.about_us")}
		providedLangs={locales}
		slot="head"
	/>
	<About />
</Document>
