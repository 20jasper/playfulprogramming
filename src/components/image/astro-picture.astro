---
import { getPicture, GetPictureOptions } from "utils/get-picture";
import { Picture } from "./picture";
import type { JSX } from "preact";

type Props = GetPictureOptions & {
	class?: string;
	imgAttrs?: JSX.HTMLAttributes<HTMLImageElement> & Record<string, unknown>;
	pictureAttrs?: JSX.HTMLAttributes<HTMLPictureElement> &
		Record<string, unknown>;
	alt: string;
};

const props = Astro.props as Props;

if (!props.src) {
	throw new Error(`<Picture> props ${props} does not include a src attribute!`);
}

const picture = await getPicture(props);
---

<Picture
	picture={picture}
	class={props.class}
	alt={props.alt}
	imgAttrs={props.imgAttrs}
	pictureAttrs={props.pictureAttrs}
/>
