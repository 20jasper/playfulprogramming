---
import { Languages } from "types/index";
import { removePrefixLanguageFromPath } from "utils/translations";

type Props = {
	lang: string;
	providedLangs?: Languages[];
	pathName: string;
	siteMetadata: { siteUrl: string };
};

const { lang, providedLangs, siteMetadata, pathName } = Astro.props as Props;

const defaultLocale = "en";

const localeSet = new Set(providedLangs ?? []);
localeSet.add(lang);
const allLocales = Array.from(localeSet);
---

<link
	rel="alternate"
	href={siteMetadata.siteUrl + removePrefixLanguageFromPath(pathName || "")}
	hreflang="x-default"
/>
<>
	{
		allLocales?.length
			? allLocales.map((locale) => (
					<link
						rel="alternate"
						href={
							siteMetadata.siteUrl +
							(locale === defaultLocale ? "" : `/${locale}`) +
							removePrefixLanguageFromPath(pathName || "")
						}
						hreflang={locale}
					/>
			  ))
			: null
	}
</>
